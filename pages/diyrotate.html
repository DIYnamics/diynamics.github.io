<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  DIYrotate | DIYnamics
</title>
  <link rel="canonical" href="/pages/diyrotate.html">


  <link rel="stylesheet" href="/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="/theme/css/theme.css">

  
  <meta name="description" content="(L) DIYrotate versus (R) rotating frame footage. Both approaches enable observing fluid motions in a rotating tank with similar granularity! Visit https://diyrot.epss.ucla.edu/ to use DIYrotate! DIYrotate is a web app for digitally rotating movies. Given footage of a rotating tank from above, the program can identify …">
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o);
      a.async = 1;
      a.src = g;
      m = s.getElementsByTagName(o)[0];
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-146133798-1', 'auto');
    ga('send', 'pageview');
  </script>


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
    <div class="col-sm-4">
      <a href="/">
        <img class="img-fluid rounded" src=/images/homepage_slideshow.gif alt="DIYnamics">
      </a>
    </div>
  <div class="col-sm-8">
    <h1 class="title"><a href="/">DIYnamics</a></h1>
      <p class="text-muted">Affordable materials for geoscience teaching demonstrations</p>
      <ul class="list-inline">
          <li class="list-inline-item"><a href="/pages/about.html">about</a></li>
          <li class="list-inline-item"><a href="/pages/kits.html">kits</a></li>
          <li class="list-inline-item"><a href="/pages/diyrotate.html">diyrotate</a></li>
          <li class="list-inline-item"><a href="https://www.youtube.com/channel/UCnUHxOSVY4G4OFbF8XL1qUg">videos</a></li>
          <li class="list-inline-item"><a href="/pages/teaching.html">teaching</a></li>
          <li class="list-inline-item"><a href="/pages/events.html">events</a></li>
          <li class="list-inline-item"><a href="/pages/blog.html">blog</a></li>
          <li class="list-inline-item"><a href="/pages/links.html">links</a></li>
          <li class="list-inline-item"><a href="/pages/people.html">team</a></li>
          <li class="list-inline-item"><a href="/pages/acknowledgments.html">acknowledgments</a></li>
            <li class=" list-inline-item text-muted">|</li>
          <li class="list-inline-item"><a class="fa fa-twitter" href="https://twitter.com/DIYnamicsTeam" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fa fa-youtube" href="https://www.youtube.com/channel/UCnUHxOSVY4G4OFbF8XL1qUg" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fa fa-github" href="https://github.com/DIYnamics/diynamics.github.io" target="_blank"></a></li>
      </ul>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  DIYrotate
</h1>
      <hr>
  <article class="article">
    <div class="content">
      <p><img src="/images/diyrotate/comparison.gif" width="600" title="DIYrotate versus rotating frame footage comparison" alt="DIYrotate versus rotating frame footage comparison"></p>
<p><em>(L) DIYrotate versus (R) rotating frame footage. Both approaches enable
observing fluid motions in a rotating tank with similar&nbsp;granularity!</em></p>
<h2>Visit <a href="https://diyrot.epss.ucla.edu/">https://diyrot.epss.ucla.edu/</a> to use&nbsp;DIYrotate!</h2>
<p>DIYrotate is a web app for digitally rotating movies. Given footage of a
rotating tank from above, the program can identify the tank and rotate it about
its center per a specified rate. DIYrotate is easy to use with no sign up
required &#8212; simply input your movie and parameters then download the&nbsp;result!</p>
<hr>
<h2>Goal: Enable users to clearly and conveniently observe fluid motions in a rotating&nbsp;tank</h2>
<p>Rotating tank platforms are straightforward and insightful models for studying
geophysical fluid dynamics. The systems capture the fundamental attributes of
Earth&#8217;s (and other planet&#8217;s) atmospheres, oceans and interiors &#8212; the water and
rotation represent a planet&#8217;s fluid bodies and rotation respectively. Fluid
motions in the rotating tank are governed by the same fluid dynamics as
counterparts in the real world. Thus, our goal is to observe the fluid motions
to develop an intuition behind the forces responsible for our weather, ocean
currents, magnetic field and more! There are two traditional&nbsp;approaches:</p>
<p><em>Note that we are generally interested in observing fluid motions in a rotating
tank from above. Rotation aligns fluid bodies with its axis and thus, for many
experiments, the surface of the water expresses the key fluid dynamics of the&nbsp;system.</em></p>
<h3>Approach 1: Capture footage in the stationary&nbsp;frame</h3>
<p>The stationary frame refers to the view of a camera fixed as the tank rotates &#8212;
this is analogous to a spacecraft observing a planet from afar. The filming
setup is flexible &#8212; the camera is supported above the tank by a point outside
the system. The mount can be jerry rigged with basic requirements (suspend
camera) and few constraints (can be heavy or light and large or small). However,
results are difficult to interpret because fluid motions are coupled with&nbsp;rotation.</p>
<h3>Approach 2: Capture footage in the rotating&nbsp;frame</h3>
<p>The rotating frame refers to the view of a camera rotating in sync with the tank
&#8212; this is analogous to a person observing a planet from its poles. The filming
setup is subject to constraints  &#8212; the camera is supported above the tank by a
point within the system. The camera and its mount must not hinder the tank&#8217;s
rotation leading to limits on size and weight. Nevertheless, results are ideal
for analysis because rotating the camera in sync with the tank abstracts away
rotation thus yielding fluid motions&nbsp;themselves.</p>
<p><img src="/images/diyrotate/stationary-frame-setup.png" width="400" title="Stationary frame filming setup" alt="Stationary frame filming setup">
<img src="/images/diyrotate/rotating-frame-setup.gif" width="400" title="Rotating frame filming setup" alt="Rotating frame filming setup"></p>
<p><em>(L) Stationary frame filming setup &#8212; a camera is fixed above the tank as it
rotates. The camera is supported by a point outside of the system. Subject to
few constraints, its mount can be put together with household items. If desired,
larger cameras like DSLRs can be safely attached with sufficient reinforcement
to mitigate fears of falling in water.<br>
(R) Rotating frame filming setup &#8212; a camera is rotating in sync with the tank.
The camera is supported by a point within the system. Its mount is constained by
size and weight to enable the tank to continue rotating unhindered. Attaching
larger cameras like DSLRs are a risky proposition without the luxury of added
support. Meanwhile, the camera mount can interfere with during experiments as
users must perform necessary steps (e.g. adding food coloring) whilst avoiding
the&nbsp;structure.</em></p>
<p><img src="/images/diyrotate/stationary-frame-result.gif" width="400" title="Stationary frame footage" alt="Stationary frame footage">
<img src="/images/diyrotate/rotating-frame-result.gif" width="400" title="Rotating frame footage" alt="Rotating frame footage"></p>
<p><em>(L) Stationary frame footage &#8212; difficult to discern fluid motions in the
rotating tank. The fluid motion is coupled with the impact of rotation thus
obscuring dynamic structures formed during experiments.
(R) Rotating frame footage &#8212; fluid motions in the rotating tank are apparent.
The impact of rotation has been abstracted away yielding fluid motions
themselves.  Note that &Omega; indicates the rotation&nbsp;direction.</em></p>
<p>To this end, capturing footage in the rotating frame is the go-to option when
recording experiments for analysis. Studying fluid motions of the system from an
inside perspective removes the impact of rotation and provides an intuitive view
of phenomena &#8212; analogous to the camera, we (humans) are situated in the
rotating frame of Earth. However, the filming setup may require additional
thought. The rotating frame offers clear results and the stationary frame offers
convenient setup &#8212; what if we can combine the best of both worlds? We introduce
a new&nbsp;approach:</p>
<h3>Approach 3: Obtain rotating frame results from stationary frame&nbsp;footage</h3>
<p>DIYrotate fills this role! Use DIYrotate to digitally rotate stationary frame
footage in the direction and magnitude opposite of the system&#8217;s rotation &#8212; we
call this process de-rotation. This serves to cancel out and abstract away
rotation leaving behind fluid motions themselves. By de-rotating the stationary
frame footage, DIYrotate programatically yields results equivalent to rotating
frame footage yet with fewer setup constraints to&nbsp;consider.</p>
<hr>
<h2>How to use&nbsp;DIYrotate</h2>
<p>DIYrotate can be accessed at
<strong><a href="https://diyrot.epss.ucla.edu/">https://diyrot.epss.ucla.edu/</a></strong>. The web app
features instructions guiding users through de-rotation step by step.
Screenshots of the app and a fully textual guide follow&nbsp;below.  </p>
<p>If you wish to follow along, click <a
href="/images/diyrotate/example.mp4" download>here</a> to download the
example video we used. The <span class="caps">RPM</span> of this video is&nbsp;13.45.  </p>
<h3>Step 0: Capture stationary frame&nbsp;footage</h3>
<p><img src="/images/diyrotate/s0.png" width="400" title="Good example video" alt="Good example video">
<em>an exemplary first frame of stationary&nbsp;footage.</em></p>
<p>For best results from the app, ensure that:<br>
- Lights are not reflecting on the surface of the water. Reflections from the
    stationary frame yield artifacts in rotating frame results.<br>
- Both the tank and camera are level. DIYrotate assumes that stationary frame
    footage is taken from directly above. Deviations from level can introduce
    distortions during de-rotation.<br>
- The tank encompasses the majority of the camera&#8217;s view.<br>
- (Optional) Ensure nothing is obstructing the tank rim during the first few
    seconds of the video. This is important for DIYrotate to automatically
    detect the tank rim. If DIYrotate cannot find the rim, it will prompt you to
    manually select&nbsp;it.  </p>
<h3>Step 1: Upload stationary frame footage to&nbsp;DIYrotate</h3>
<p><img src="/images/diyrotate/s1.png" width="400" title="Shortly after step 1" alt="Shortly after step 1">
<em>a view of the webpage just as it completes uploading your video to the&nbsp;server.</em></p>
<p>In the following order:<br>
1. Specify the rotations per minute (<span class="caps">RPM</span>) of the rotating surface. Positive and
   negative de-rotation rates will counteract counterclockwise and clockwise
   system rotation respectively. Non-integer values are allowed!<br>
2. (Optional) if you wish to see the original and derotated frame side by side,
   check the check box. Note: when using this mode, the rough preview will only
   have the derotated frame. The fully processed video will show both frames.<br>
3. Pick the video file you wish to upload. The program will automatically start
   uploading your&nbsp;video.  </p>
<p><em>note: when using Safari, very large files (&gt;<span class="caps">100MB</span>) may cause the web page to
reload, with an error near the top of the page saying &#8220;This webpage is using
significant memory.&#8221; If this occurs, we recommend users try Firefox or&nbsp;Chrome.</em></p>
<h4 id="slow-mo">Notes for high-speed cameras (slow motion&nbsp;video)</h4>
<p>If you captured your video using a high-speed camera or the &#8220;slow motion&#8221;
feature on your smartphone, some extra work is required to use DIYrotate. You
should find the <strong>recording fps</strong> and the <strong>output fps</strong> of your video, and
convert your input <span class="caps">RPM</span> as such:<br>
inputRPM = tableRPM * (output_fps / recording_fps)<br>
<strong>Recording fps</strong> can often be found in your camera settings. Here are mine on
iPhone, which I found by going to Settings &gt; Camera &gt; Record&nbsp;Slo-mo:  </p>
<p><img src="/images/diyrotate/iphone_fps.jpg" width="400">  </p>
<p><strong>Output fps</strong> is usually 30. To double check, open the slow motion video in <span class="caps">VLC</span>
and look for &#8220;Media Information&#8221; under &#8220;Window&#8221; or &#8220;Tools&#8221; in the menu bar.
Click the &#8220;Codec&#8221; tab, and round whatever frame rate is displayed to the closest&nbsp;integer.  </p>
<p><img src="/images/diyrotate/vlc_fps.png" width="400">  </p>
<p>This is necessary because DIYrotate has no conception of time beyond frames per
second of the video. If a video reports it has 30 fps (which is what <strong>output
fps</strong> is), DIYrotate will treat each frame as 1/30th of a second. Slow motion
cameras record at higher frame rates such as 120 fps and export the video at 30
fps, effectively slowing motion by 0.25x. DIYrotate has no way of telling
between the two, so manual intervention is&nbsp;required.</p>
<h3>Step 2: Review Generated&nbsp;Preview</h3>
<p><img src="/images/diyrotate/s20.png" width="400" title="Shortly after step 2" alt="Shortly after step 2">
<em>the webpage asking the user to inspect a generated&nbsp;preview.</em></p>
<ul>
<li>The app should now generate a preview of what the first ten seconds of
    derotated video should look&nbsp;like.</li>
<li>Inspect this clip; if it is unsatisfactory, click &#8216;Adjust&#8217; to manually set the
    derotation circle (see Step 2.1), and then click &#8216;Regenerate Preview&#8217; to
    generate another&nbsp;preview.  </li>
<li>Once the preview looks as you&#8217;d expect, click &#8216;Derotate&#8217; to request a full
    derotation from the&nbsp;server.</li>
</ul>
<h3>Step 2.1: Manually set derotation&nbsp;circle</h3>
<p><img src="/images/diyrotate/s21.png" width="400" title="Manual mode 2" alt="Manual mode 2">
<em>view of manual mode, with the auto-detected circle shown in&nbsp;red.</em></p>
<p>After the upload is complete, it is possible that DIYrotate cannot detect the
rim of the tank in your video. To fix this, click the &#8216;Adjust&#8217; button, then
specify the radius of the circle by drawing from the center of the tank to the
side, using your mouse or touchscreen. You can adjust the center of the circle
after drawing it by dragging on the circumference of the circle. If you need to
redraw, click/tap anywhere not on the circumference to remove the circle, then
repeat the&nbsp;above.</p>
<p><img src="/images/diyrotate/s22.png" width="400" title="Manual mode shifted 2" alt="Manual mode shifted 2"><br>
<em>view of manual mode, with a redrawn circle offset from the actual tank.</em><br>
<em>note: during actual usage, try to match the circle with tank rim as much as possible,
as in the previous&nbsp;image.</em></p>
<h3>Steps 3 and 4: Wait, and then download derotated footage from&nbsp;DIYrotate!</h3>
<p><img src="/images/diyrotate/s34.png" width="400" title="Waiting for download 2" alt="Waiting for download 2">
<em>the webpage also asks you to be patient with larger&nbsp;videos.</em></p>
<p>Please hang tight! Depending on server load and file size, videos may take up to
5 minutes to finish processing, and the browser page will check for updates ever
10 seconds or so. If you accidently close the browser page, going back to
<a href="https://diyrot.epss.ucla.edu">diyrot.epss.ucla.edu</a> may recover your derotation&nbsp;progress.</p>
<p><img src="/images/diyrotate/pre-diyrotate.gif" width="400" title="DIYrotate input" alt="DIYrotate input">
<img src="/images/diyrotate/post-diyrotate.gif" width="400" title="DIYrotate output" alt="DIYrotate output"></p>
<p><em>(L) DIYrotate input (stationary frame footage) versus (R) DIYrotate output
(programatically created rotating frame footage). Note that the impact of
rotation has been&nbsp;removed!</em></p>
<p>For a detailed version of the instructions and to see more results, watch the
following video for a comprehensive overview of&nbsp;DIYrotate!</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/u6OoYdrYZ0o" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h2>Other rotating videos to&nbsp;try:</h2>
<ul>
<li><a href="/images/diyrotate/bernie.mp4" download>Bernie</a> @ 6.0 <span class="caps">RPM</span></li>
<li><a href="/images/diyrotate/synth.mp4" download>Synthetic</a> @ 10.0 <span class="caps">RPM</span></li>
</ul>
<hr>
<h2>Check out the code for&nbsp;DIYrotate</h2>
<p>DIYrotate is an open source project available on&nbsp;GitHub!</p>
<h3>DIYrotate (web app) <a href="https://github.com/DIYnamics/diyrot">https://github.com/DIYnamics/diyrot</a></h3>
<p>The web app version of DIYrotate is described above. This program is ideal for
de-rotating stationary frame footage with no installation&nbsp;required.  </p>
<h3>DIYrotate (local) <a href="https://github.com/DIYnamics/DIYrotate">https://github.com/DIYnamics/DIYrotate</a></h3>
<p>The local version of DIYrotate enables users to de-rotate stationary frame
footage similar to its web app counterpart. This program offers a multitude of
options providing fine grained control over results. The local version of
DIYrotate is launched from the Terminal and features a <span class="caps">GUI</span> for user input &#8212;
more details can be found on the GitHub&nbsp;repository.  </p>
    </div>
  </article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
      <li class="list-inline-item"><a href="/authors.html">Authors</a></li>
    <li class="list-inline-item"><a href="/archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="/categories.html">Categories</a></li>
      <li class="list-inline-item"><a href="/tags.html">Tags</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>    </div>
  </footer>
</body>

</html>